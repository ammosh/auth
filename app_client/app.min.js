function config(e,o,t){t.setOptions({delay:2e3,startTop:20,startRight:10,verticalSpacing:20,horizontalSpacing:20,positionX:"center",positionY:"bottom"}),e.when("/register",{templateUrl:"views/_auth/register.view.html",controller:"registerCtrl",controllerAs:"vm"}).when("/login",{templateUrl:"views/_auth/login.view.html",controller:"loginCtrl",controllerAs:"vm"}).when("/home",{templateUrl:"views/_home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/feeds",{templateUrl:"views/_feeds/feeds.view.html",controller:"feedsCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/home"}),o.html5Mode(!0)}function run(e,o,t,n){e.$on("$viewContentLoaded",function(){t(function(){componentHandler.upgradeAllRegistered()})}),e.$on("$routeChangeStart",function(e,t,i){console.log("redirect to: "+o.path()),n.isLoggedIn()?console.log("logged in"):"/login"!=o.path()&&"/register"!=o.path()&&"/"!=o.path()&&o.path("/")})}angular.module("fitforlife",["ngRoute","ngMessages","angular-ladda","ui-notification","ngStorage"]),angular.module("fitforlife").config(["$routeProvider","$locationProvider","NotificationProvider",config]).run(["$rootScope","$location","$timeout","authService",run]),function(){function e(e,o,t){var n=function(o){return e.post("/api/register",o)},i=function(o){return e.post("/api/login",o)},r=function(e){t.fitforlife_token=e},l=function(){return console.log(t.fitforlife_token),t.fitforlife_token},a=function(){var e=l();console.log(e);var t;return!!e&&(t=e.split(".")[1],t=o.atob(t),t=JSON.parse(t),console.log(t),console.log(t.exp>Date.now()/1e3),t.exp>Date.now()/1e3)},c=function(){if(a()){var e=l(),t=e.split(".")[1];return t=o.atob(t),t=JSON.parse(t),{email:t._email,name:t._name}}};return logout=function(){$localstorage.remove("fitforlife-token")},{register:n,login:i,saveToken:r,getToken:l,isLoggedIn:a,currentUser:c,logout:logout}}angular.module("fitforlife").service("authService",e),e.$inject=["$http","$window","$localStorage"]}(),function(){function e(e,o,t,n,i,r){var l=this;l.auth={_email:"",_password:""},l.loading=!1,l.login=function(){l.loading=!0,i.login(l.auth).then(function(e){r.success({message:e.data.message,title:e.statusText}),i.saveToken(e.data.token),n(function(){o.path("feed")},500)})["catch"](function(e){r.error({message:e.data.message,title:e.statusText})})["finally"](function(){l.loading=!1})}}angular.module("fitforlife").controller("loginCtrl",e),e.$inject=["$scope","$location","$localStorage","$timeout","authService","Notification"]}(),function(){function e(e,o,t,n){var i=this;i.user={_name:"",_email:"",_password:"",_confirm_password:""},i.loading=!1,i.register=function(){i.loading=!0,t.register(i.user).then(function(e){console.log(e),n.success({message:e.data.message,title:e.statusText});var o=document.querySelector("dialog");o.showModal(),o.querySelector(".close-modal").addEventListener("click",function(){o.close()})})["catch"](function(e){console.log(e),n.error({message:e.data.message,title:e.statusText})})["finally"](function(){i.loading=!1})}}angular.module("fitforlife").controller("registerCtrl",e),e.$inject=["$scope","$location","authService","Notification"]}(),function(){function e(){}angular.module("fitforlife").controller("feedsCtrl",e)}(),function(){function e(){}angular.module("fitforlife").controller("homeCtrl",e)}();
//# sourceMappingURL=app.min.js.map
