function config(e,t,o){o.setOptions({delay:2e3,startTop:20,startRight:10,verticalSpacing:20,horizontalSpacing:20,positionX:"right",positionY:"bottom"}),e.when("/register",{templateUrl:"views/_auth/register.view.html",controller:"registerCtrl",controllerAs:"vm"}).when("/login",{templateUrl:"views/_auth/login.view.html",controller:"loginCtrl",controllerAs:"vm"}).when("/home",{templateUrl:"views/_home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/feeds",{templateUrl:"views/_feeds/feeds.view.html",controller:"feedsCtrl",controllerAs:"vm"}).when("/profile",{templateUrl:"views/_profile/profile.view.html",controller:"profileCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/home"}),t.html5Mode(!0)}function run(e,t,o,i){e.$on("$routeChangeStart",function(e,o,n){console.log("redirect to: "+t.path()),i.isLoggedIn()||"/login"!=t.path()&&"/register"!=t.path()&&"/home"!=t.path()&&t.path("/home")})}angular.module("fitforlife",["ngRoute","ngAnimate","ngSanitize","ngTouch","ui.bootstrap","ngMessages","angular-ladda","ui-notification","ngStorage"]),angular.module("fitforlife").config(["$routeProvider","$locationProvider","NotificationProvider",config]).run(["$rootScope","$location","$timeout","authService",run]),$.validator.setDefaults({highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error").addClass("has-success")},errorClass:"error",errorPlacement:function(e,t){t.parent(".input-group").length?e.insertAfter(t.parent()):e.insertAfter($(t).parent().find(".form-control-feedback"))}}),function(){function e(e,t,o){var i=function(t){return e.post("/api/register",t)},n=function(t){return e.post("/api/login",t)},r=function(e){o.fitforlife_token=e},a=function(){return o.fitforlife_token},l=function(){var e,o=a();return!!o&&(e=o.split(".")[1],e=t.atob(e),e=JSON.parse(e),e.exp>Date.now()/1e3)},c=function(){if(l()){var e=a(),o=e.split(".")[1];return o=t.atob(o),o=JSON.parse(o),{_email:o._email,_name:o._name}}};return logout=function(){o.fitforlife_token=null},{register:i,login:n,saveToken:r,getToken:a,isLoggedIn:l,currentUser:c,logout:logout}}angular.module("fitforlife").service("authService",e),e.$inject=["$http","$window","$localStorage"]}(),function(){function e(e,t,o,i,n,r){var a=this;a.user={_email:"",_password:""},$("#login").validate({rules:{email:{required:!0,email:!0,maxlength:100},password:{required:!0,minlength:8,maxlength:25}}}),a.loading=!1,a.login=function(){$("#login").valid()&&(a.loading=!0,n.login(a.user).then(function(e){r.success({message:e.data.message,title:e.statusText}),n.saveToken(e.data.token),i(function(){t.path("feed")},500)})["catch"](function(e){r.error({message:e.data.message,title:e.statusText})})["finally"](function(){a.loading=!1}))}}angular.module("fitforlife").controller("loginCtrl",e),e.$inject=["$scope","$location","$localStorage","$timeout","authService","Notification"]}(),function(){function e(e,t,o,i,n){var r=this;r.user={_name:"",_email:"",_password:"",_confirm_password:""},$("#registration").validate({rules:{email:{required:!0,email:!0,maxlength:100},name:{required:!0,minlength:2,maxlength:40},password:{required:!0,minlength:8,maxlength:25},confirm_password:{required:!0,minlength:8,maxlength:25,equalTo:"#password"}}}),r.loading=!1,r.register=function(){$("#registration").valid()&&(r.loading=!0,i.register(r.user).then(function(e){console.log(e),n.success({message:e.data.message,title:e.statusText});var i=o.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"/views/_prompts/dialog.view.html",controller:"dialogCtrl as vmd",size:"sm",resolve:{info:function(){return{_title:"Awesome...",_message:"You registered successfully. Please login to get access.",_confirm_label:"Let's Start!"}}}});i.result.then(function(e){t.path("login")},function(){})})["catch"](function(e){console.log(e),n.error({message:e.data.message,title:e.statusText})})["finally"](function(){r.loading=!1}))}}angular.module("fitforlife").controller("registerCtrl",e),e.$inject=["$scope","$location","$uibModal","authService","Notification"]}(),angular.module("fitforlife").directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(t,o,i){var n=e(i.fileModel),r=n.assign;o.bind("change",function(){t.$apply(function(){r(t,o[0].files[0])})})}}}]),function(){function e(){}angular.module("fitforlife").controller("feedsCtrl",e)}(),function(){function e(e,t,o,i,n){var r=this;r.user={_bio:""},r.selectPic=function(){$("#profilePic").click()},e.$watch("vm.profilePic",function(){if(r.profilePic){var e=o.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"/views/_crop/crop.view.html",controller:"cropCtrl as vmd",resolve:{image:function(){return{_file:r.profilePic}}}});e.result.then(function(e){e&&$("#userPic").attr("src",e),$("#profilePic").val("")},function(){})}})}angular.module("fitforlife").controller("profileCtrl",e),e.$inject=["$scope","$location","$uibModal","authService","Notification"]}(),function(){function e(e,t){var o=this;o.checkLogin=function(){return t.isLoggedIn()},o.logout=function(){t.logout(),e.path("login")},o.currentUser=t.currentUser()}angular.module("fitforlife").controller("navigationCtrl",e),e.$inject=["$location","authService"]}(),function(){function e(){return{restrict:"EA",templateUrl:"/views/_navigation/navigation.template.html",controller:"navigationCtrl as navvm"}}angular.module("fitforlife").directive("navigation",e)}(),function(){function e(e,t,o){console.log(o);var i=this;i.info=o?o:{},i.close=function(e){t.close(e)}}angular.module("fitforlife").controller("dialogCtrl",e),e.$inject=["$uibModal","$uibModalInstance","info"]}(),angular.module("fitforlife").filter("capitalize",function(){return function(e){return e?e.charAt(0).toUpperCase()+e.substr(1).toLowerCase():""}}).filter("datetime",function(){return function(e){if(!e)return"";var t=Date.parse(e);if(isNaN(e)&&!isNaN(t)){var o=new Date(e);return o.toLocaleString()}return e}}).filter("propsFilter",function(){return function(e,t){var o=[];if(angular.isArray(e)){var i=Object.keys(t);e.forEach(function(e){for(var n=!1,r=0;r<i.length;r++){var a=i[r],l=t[a].toLowerCase();if(e[a].toString().toLowerCase().indexOf(l)!==-1){n=!0;break}}n&&o.push(e)})}else o=e;return o}}),function(){function e(){}angular.module("fitforlife").controller("homeCtrl",e)}(),function(){function e(e,t,o,i){var n=this;n.image=i,o.rendered.then(function(){if(!n.image||!n.image._file||!n.image._file.type.match("image.*"))return void console.log("not a valid image.");n.imageData="";var e=new FileReader,t=new Image;n.canvas=document.getElementById("imageCanvas"),n.ctx=n.canvas.getContext("2d"),n.cropper,t.onload=function(){n.canvas.width=300,n.canvas.height=300/t.width*t.height,n.ctx.drawImage(t,0,0,t.width,t.height,0,0,n.canvas.width,n.canvas.height),n.cropper=$("#imageCanvas").cropper()},e.onload=function(e){t.src=e.target.result},e.readAsDataURL(n.image._file)}),n.selection=null,n.setSize=function(e,t){n.selection=t},n.close=function(e){var t=$("#imageCanvas").cropper("getCroppedCanvas"),i=t.toDataURL();o.close(i),$("#imageCanvas").cropper("destroy")}}angular.module("fitforlife").controller("cropCtrl",e),e.$inject=["$scope","$uibModal","$uibModalInstance","image"]}();
//# sourceMappingURL=app.min.js.map
