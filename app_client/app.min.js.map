{"version":3,"sources":["app.min.js"],"names":["config","$routeProvider","$locationProvider","NotificationProvider","setOptions","delay","startTop","startRight","verticalSpacing","horizontalSpacing","positionX","positionY","when","templateUrl","controller","controllerAs","otherwise","redirectTo","html5Mode","run","$rootScope","$location","$timeout","authService","$on","event","nextRoute","currentRoute","console","log","path","isLoggedIn","angular","module","$","validator","setDefaults","highlight","element","closest","removeClass","addClass","unhighlight","errorClass","errorPlacement","error","parent","length","insertAfter","find","$http","$window","$localStorage","register","user","post","login","saveToken","token","fitforlife_token","getToken","payload","split","atob","JSON","parse","exp","Date","now","currentUser","_email","_name","logout","service","$inject","loginCtrl","$scope","notify","vm","this","_password","validate","rules","email","required","maxlength","password","minlength","loading","valid","then","response","success","message","data","title","statusText","err","registerCtrl","$uibModal","_confirm_password","name","confirm_password","equalTo","modalInstance","open","animation","backdrop","keyboard","size","resolve","info","_title","_message","_confirm_label","result","directive","$parse","restrict","link","scope","attrs","model","fileModel","modelSetter","assign","bind","$apply","files","feedsCtrl","profileCtrl","_bio","selectPic","click","$watch","profilePic","image","_file","attr","val","navigationCtrl","checkLogin","navigation","dialogCtrl","$uibModalInstance","close","filter","input","charAt","toUpperCase","substr","toLowerCase","parsedDate","isNaN","_date","toLocaleString","items","props","out","isArray","keys","Object","forEach","item","itemMatches","i","prop","text","toString","indexOf","push","homeCtrl","cropCtrl","rendered","type","match","imageData","reader","FileReader","Image","canvas","document","getElementById","ctx","getContext","cropper","onload","width","height","drawImage","e","src","target","readAsDataURL","selection","setSize","img","toDataURL"],"mappings":"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","file":"app.min.js","sourcesContent":["angular.module('fitforlife', ['ngRoute', 'ngAnimate', 'ngSanitize', 'ngTouch', 'ui.bootstrap', 'ngMessages', 'angular-ladda', 'ui-notification', 'ngStorage']);\r\n\r\nfunction config($routeProvider, $locationProvider, NotificationProvider) {\r\n  NotificationProvider.setOptions({\r\n    delay: 2000,\r\n    startTop: 20,\r\n    startRight: 10,\r\n    verticalSpacing: 20,\r\n    horizontalSpacing: 20,\r\n    positionX: 'right',\r\n    positionY: 'bottom'\r\n  });\r\n\r\n  $routeProvider\r\n    .when('/register', {\r\n      templateUrl: 'views/_auth/register.view.html',\r\n      controller: 'registerCtrl',\r\n      controllerAs: 'vm'\r\n    }).when('/login', {\r\n      templateUrl: 'views/_auth/login.view.html',\r\n      controller: 'loginCtrl',\r\n      controllerAs: 'vm'\r\n    }).when('/home', {\r\n      templateUrl: 'views/_home/home.view.html',\r\n      controller: 'homeCtrl',\r\n      controllerAs: 'vm'\r\n    }).when('/feeds', {\r\n      templateUrl: 'views/_feeds/feeds.view.html',\r\n      controller: 'feedsCtrl',\r\n      controllerAs: 'vm'\r\n    }).when('/profile', {\r\n      templateUrl: 'views/_profile/profile.view.html',\r\n      controller: 'profileCtrl',\r\n      controllerAs: 'vm'\r\n    })\r\n    .otherwise({\r\n      redirectTo: '/home'\r\n    });\r\n\r\n  // use the HTML5 history API\r\n  $locationProvider.html5Mode(true);\r\n}\r\n\r\nfunction run($rootScope, $location, $timeout, authService) {\r\n  $rootScope.$on('$routeChangeStart', function(event, nextRoute, currentRoute) {\r\n    console.log(\"redirect to: \" + $location.path());\r\n    if (authService.isLoggedIn()) { // check if user is logged in\r\n      // user is logged in\r\n    } else {\r\n      if (($location.path() != '/login' && $location.path() != '/register' && $location.path() != '/home')) {\r\n        $location.path('/home');\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nangular.module('fitforlife').config(['$routeProvider', '$locationProvider', 'NotificationProvider', config])\r\n  .run(['$rootScope', '$location', '$timeout', 'authService', run]);\r\n\r\n\r\n\r\n\r\n$.validator.setDefaults({\r\n  highlight: function(element) {\r\n    $(element).closest('.form-group').removeClass('has-success').addClass('has-error')\r\n      // $(element).parent().find('.form-control-feedback').removeClass('fa-check').addClass('fa-remove');\r\n  },\r\n  unhighlight: function(element) {\r\n    $(element).closest('.form-group').removeClass('has-error').addClass('has-success');\r\n    // $(element).parent().find('.form-control-feedback').removeClass('fa-remove').addClass('fa-check');\r\n  },\r\n  errorClass: 'error',\r\n  errorPlacement: function(error, element) {\r\n    if (element.parent('.input-group').length) {\r\n      error.insertAfter(element.parent());\r\n    } else {\r\n      error.insertAfter($(element).parent().find('.form-control-feedback'));\r\n    }\r\n  }\r\n});\r\n\n(function() {\r\n\r\n  angular\r\n    .module('fitforlife')\r\n    .service('authService', authService);\r\n\r\n  authService.$inject = ['$http', '$window', '$localStorage'];\r\n\r\n  function authService($http, $window, $localStorage) {\r\n\r\n    var register = function(user) {\r\n      return $http.post('/api/register', user);\r\n    }\r\n\r\n    var login = function(user) {\r\n      return $http.post('/api/login', user);\r\n    }\r\n\r\n    var saveToken = function(token) {\r\n      $localStorage.fitforlife_token = token;\r\n    };\r\n\r\n    var getToken = function() {\r\n      return $localStorage.fitforlife_token;\r\n    };\r\n\r\n    var isLoggedIn = function() {\r\n      var token = getToken();\r\n      var payload;\r\n      if (token) {\r\n        payload = token.split('.')[1];\r\n        payload = $window.atob(payload);\r\n        payload = JSON.parse(payload);\r\n        return payload.exp > Date.now() / 1000;\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n\r\n    var currentUser = function() {\r\n      if (isLoggedIn()) {\r\n        var token = getToken();\r\n        var payload = token.split('.')[1];\r\n        payload = $window.atob(payload);\r\n        payload = JSON.parse(payload);\r\n        return {\r\n          _email: payload._email,\r\n          _name: payload._name\r\n        };\r\n      }\r\n    };\r\n\r\n    logout = function() {\r\n      $localStorage.fitforlife_token = null;\r\n    };\r\n\r\n\r\n    return {\r\n      register: register,\r\n      login: login,\r\n      saveToken: saveToken,\r\n      getToken: getToken,\r\n      isLoggedIn: isLoggedIn,\r\n      currentUser: currentUser,\r\n      logout: logout\r\n    };\r\n  }\r\n})();\r\n\n(function() {\r\n  angular\r\n    .module('fitforlife')\r\n    .controller('loginCtrl', loginCtrl);\r\n\r\n  loginCtrl.$inject = ['$scope', '$location', '$localStorage', '$timeout', 'authService', 'Notification'];\r\n\r\n  function loginCtrl($scope, $location, $localStorage, $timeout, authService, notify) {\r\n    var vm = this;\r\n    vm.user = {\r\n      _email: '',\r\n      _password: '',\r\n    }\r\n\r\n\r\n    $('#login').validate({\r\n      rules: {\r\n        email: {\r\n          required: true,\r\n          email: true,\r\n          maxlength: 100\r\n        },\r\n        password: {\r\n          required: true,\r\n          minlength: 8,\r\n          maxlength: 25\r\n        }\r\n      }\r\n    });\r\n\r\n\r\n    vm.loading = false;\r\n    vm.login = function() {\r\n      if (!$('#login').valid()) return;\r\n      vm.loading = true;\r\n      authService.login(vm.user)\r\n        .then(function(response) {\r\n          notify.success({\r\n            message: response.data.message,\r\n            title: response.statusText\r\n          });\r\n          authService.saveToken(response.data.token);\r\n          $timeout(function() {\r\n            $location.path('feed');\r\n          }, 500);\r\n        }).catch(function(err) {\r\n          notify.error({\r\n            message: err.data.message,\r\n            title: err.statusText\r\n          });\r\n        }).finally(function() {\r\n          vm.loading = false;\r\n        });\r\n    }\r\n  }\r\n})();\r\n\n(function() {\r\n  angular\r\n    .module('fitforlife')\r\n    .controller('registerCtrl', registerCtrl);\r\n\r\n  registerCtrl.$inject = ['$scope', '$location', '$uibModal', 'authService', 'Notification'];\r\n\r\n  function registerCtrl($scope, $location, $uibModal, authService, notify) {\r\n    var vm = this;\r\n    vm.user = {\r\n      _name: '',\r\n      _email: '',\r\n      _password: '',\r\n      _confirm_password: ''\r\n    }\r\n\r\n\r\n    $('#registration').validate({\r\n      rules: {\r\n        email: {\r\n          required: true,\r\n          email: true,\r\n          maxlength: 100\r\n        },\r\n        name: {\r\n          required: true,\r\n          minlength: 2,\r\n          maxlength: 40\r\n        },\r\n\r\n        password: {\r\n          required: true,\r\n          minlength: 8,\r\n          maxlength: 25\r\n        },\r\n        confirm_password: {\r\n          required: true,\r\n          minlength: 8,\r\n          maxlength: 25,\r\n          equalTo: \"#password\"\r\n        }\r\n      }\r\n    });\r\n\r\n\r\n    vm.loading = false;\r\n    vm.register = function() {\r\n      if (!$('#registration').valid()) return;\r\n      vm.loading = true;\r\n      authService.register(vm.user)\r\n        .then(function(response) {\r\n          console.log(response);\r\n          notify.success({\r\n            message: response.data.message,\r\n            title: response.statusText\r\n          });\r\n\r\n          var modalInstance = $uibModal.open({\r\n            animation: true,\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            templateUrl: '/views/_prompts/dialog.view.html',\r\n            controller: 'dialogCtrl as vmd',\r\n            size: 'sm',\r\n            resolve: {\r\n              info: function() {\r\n                return {\r\n                  _title: 'Awesome...',\r\n                  _message: 'You registered successfully. Please login to get access.',\r\n                  _confirm_label : \"Let's Start!\"\r\n                };\r\n              }\r\n            }\r\n          });\r\n          modalInstance.result.then(function(data) {\r\n            $location.path('login');\r\n          }, function() {\r\n\r\n          });\r\n        }).catch(function(err) {\r\n          console.log(err);\r\n          notify.error({\r\n            message: err.data.message,\r\n            title: err.statusText\r\n          });\r\n        }).finally(function() {\r\n          vm.loading = false;\r\n        });\r\n    }\r\n  }\r\n})();\r\n\n/* adding the event handler for file change*/\r\nangular.module('fitforlife').directive('fileModel', ['$parse', function($parse) {\r\n  return {\r\n    restrict: 'A',\r\n    link: function(scope, element, attrs) {\r\n      var model = $parse(attrs.fileModel);\r\n      var modelSetter = model.assign;\r\n      element.bind('change', function() {\r\n        scope.$apply(function() {\r\n          modelSetter(scope, element[0].files[0]);\r\n        });\r\n      });\r\n    }\r\n  };\r\n}]);\r\n\n(function() {\r\n  angular\r\n    .module('fitforlife')\r\n    .controller('feedsCtrl', feedsCtrl);\r\n\r\n  function feedsCtrl() {\r\n\r\n  }\r\n})();\r\n\n// /* common sessionStorage */\n// angular.module('fitforlife').factory('$sessionStorage', ['$window', function($window) {\n//   return {\n//     set: function(key, value) {\n//       $window.sessionStorage[key] = value;\n//     },\n//     get: function(key) {\n//       return $window.sessionStorage[key] || '';\n//     },\n//     setObject: function(key, value) {\n//       $window.sessionStorage[key] = JSON.stringify(value);\n//     },\n//     getObject: function(key) {\n//       if ($window.sessionStorage[key] != \"undefined\") {\n//         var value = $window.sessionStorage[key];\n//         if (value != undefined)\n//           return JSON.parse(value);\n//         else\n//           return {};\n//       }\n//       return {};\n//     },\n//     remove: function(key) {\n//       $window.sessionStorage.removeItem(key);\n//     },\n//     clear: function() {\n//       $window.sessionStorage.clear();\n//     }\n//   }\n// }]);\n\n// /* common localstorage */\n// angular.module('fitforlife').factory('$localstorage', ['$window', function($window) {\n//   return {\n//     set: function(key, value) {\n//       $window.localStorage[key] = value;\n//     },\n//     get: function(key) {\n//       return $window.localStorage[key] || '';\n//     },\n//     setObject: function(key, value) {\n//       $window.localStorage[key] = JSON.stringify(value);\n//     },\n//     getObject: function(key) {\n//       if ($window.localStorage[key] != \"undefined\") {\n//         var value = $window.localStorage[key];\n//         if (value != undefined)\n//           return JSON.parse(value);\n//         else\n//           return {};\n//       }\n//       return {};\n//     },\n//     remove: function(key) {\n//       $window.localStorage.removeItem(key);\n//     },\n//     clear: function() {\n//       $window.localStorage.clear();\n//     }\n//   }\n// }]);\n\n(function() {\r\n  angular\r\n    .module('fitforlife')\r\n    .controller('profileCtrl', profileCtrl);\r\n\r\n  profileCtrl.$inject = ['$scope', '$location', '$uibModal', 'authService', 'Notification'];\r\n\r\n  function profileCtrl($scope, $location, $uibModal, authService, notify) {\r\n    var vm = this;\r\n    vm.user = {\r\n      _bio: ''\r\n    }\r\n    vm.selectPic = function() {\r\n      $('#profilePic').click();\r\n    }\r\n    $scope.$watch('vm.profilePic', function() {\r\n      if (vm.profilePic) {\r\n        var modalInstance = $uibModal.open({\r\n          animation: true,\r\n          backdrop: 'static',\r\n          keyboard: false,\r\n          templateUrl: '/views/_crop/crop.view.html',\r\n          controller: 'cropCtrl as vmd',\r\n          resolve: {\r\n            image: function() {\r\n              return {\r\n                _file: vm.profilePic\r\n              };\r\n            }\r\n          }\r\n        });\r\n        modalInstance.result.then(function(data) {\r\n          if (data) {\r\n            $(\"#userPic\").attr(\"src\", data);\r\n          }\r\n          $('#profilePic').val('');\r\n        }, function() {\r\n\r\n        });\r\n      }\r\n    });\r\n  }\r\n})();\r\n\n(function() {\n\n  angular\n    .module('fitforlife')\n    .controller('navigationCtrl', navigationCtrl);\n\n  navigationCtrl.$inject = ['$location', 'authService'];\n\n  function navigationCtrl($location, authService) {\n    var vm = this;\n\n    vm.checkLogin = function() {\n      return authService.isLoggedIn()\n    };\n    vm.logout = function() {\n      authService.logout();\n      $location.path('login');\n    }\n    vm.currentUser = authService.currentUser();\n  }\n\n})();\n\n(function() {\r\n  angular\r\n    .module('fitforlife')\r\n    .directive('navigation', navigation);\r\n\r\n  function navigation() {\r\n    return {\r\n      restrict: 'EA',\r\n      templateUrl: '/views/_navigation/navigation.template.html',\r\n      controller: 'navigationCtrl as navvm'\r\n    };\r\n  }\r\n})();\r\n\n(function() {\r\n  angular\r\n    .module('fitforlife')\r\n    .controller('dialogCtrl', dialogCtrl);\r\n\r\n  dialogCtrl.$inject = ['$uibModal', '$uibModalInstance', 'info'];\r\n\r\n  function dialogCtrl($uibModal, $uibModalInstance, info) {\r\n    console.log(info);\r\n    var vm = this;\r\n    vm.info = info ? info : {};\r\n    vm.close = function(data) {\r\n      $uibModalInstance.close(data);\r\n    };\r\n  }\r\n})();\r\n\nangular\r\n  .module('fitforlife')\r\n  .filter('capitalize', function() {\r\n    return function(input) {\r\n      return (!!input) ? input.charAt(0).toUpperCase() + input.substr(1).toLowerCase() : '';\r\n    }\r\n  })\r\n  .filter('datetime', function() {\r\n    return function(input) {\r\n      if (!input) {\r\n        return \"\";\r\n      }\r\n      var parsedDate = Date.parse(input);\r\n      if (isNaN(input) && !isNaN(parsedDate)) {\r\n        var _date = new Date(input);\r\n        return _date.toLocaleString();\r\n      } else {\r\n        return input;\r\n      }\r\n    };\r\n  }).filter('propsFilter', function() {\r\n    return function(items, props) {\r\n      var out = [];\r\n\r\n      if (angular.isArray(items)) {\r\n        var keys = Object.keys(props);\r\n\r\n        items.forEach(function(item) {\r\n          var itemMatches = false;\r\n\r\n          for (var i = 0; i < keys.length; i++) {\r\n            var prop = keys[i];\r\n            var text = props[prop].toLowerCase();\r\n            if (item[prop].toString().toLowerCase().indexOf(text) !== -1) {\r\n              itemMatches = true;\r\n              break;\r\n            }\r\n          }\r\n\r\n          if (itemMatches) {\r\n            out.push(item);\r\n          }\r\n        });\r\n      } else {\r\n        out = items;\r\n      }\r\n      return out;\r\n    };\r\n  });\r\n\n(function() {\r\n  angular\r\n    .module('fitforlife')\r\n    .controller('homeCtrl', homeCtrl);\r\n\r\n  function homeCtrl() {\r\n\r\n  }\r\n})();\r\n\n(function() {\r\n  angular\r\n    .module('fitforlife')\r\n    .controller('cropCtrl', cropCtrl);\r\n\r\n  cropCtrl.$inject = ['$scope', '$uibModal', '$uibModalInstance', 'image'];\r\n\r\n  function cropCtrl($scope, $uibModal, $uibModalInstance, image) {\r\n    var vm = this;\r\n    vm.image = image;\r\n    $uibModalInstance.rendered.then(function() {\r\n      if (!vm.image || !vm.image._file || !vm.image._file.type.match('image.*')) {\r\n        console.log(\"not a valid image.\");\r\n        return;\r\n      }\r\n      vm.imageData = '';\r\n      var reader = new FileReader();\r\n      var image = new Image() //document.getElementById(\"imageContent\");\r\n      vm.canvas = document.getElementById(\"imageCanvas\");\r\n      vm.ctx = vm.canvas.getContext(\"2d\");\r\n      vm.cropper;\r\n      image.onload = function() {\r\n        vm.canvas.width = 300;\r\n        vm.canvas.height = (300 / image.width) * image.height;\r\n        vm.ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, vm.canvas.width, vm.canvas.height);\r\n        vm.cropper = $('#imageCanvas').cropper();\r\n      };\r\n      reader.onload = function(e) {\r\n        image.src = e.target.result;\r\n      };\r\n      reader.readAsDataURL(vm.image._file);\r\n    });\r\n    vm.selection = null;\r\n    vm.setSize = function(img, selection) {\r\n      vm.selection = selection;\r\n    }\r\n    vm.close = function(data) {\r\n      var canvas = $('#imageCanvas').cropper('getCroppedCanvas');\r\n      var image = canvas.toDataURL();\r\n      $uibModalInstance.close(image);\r\n      $('#imageCanvas').cropper('destroy');\r\n    };\r\n  }\r\n\r\n})();\r\n"],"sourceRoot":"/source/"}